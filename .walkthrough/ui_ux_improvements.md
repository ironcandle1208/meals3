# UI/UX改善案

## 概要
このドキュメントでは、meals3アプリケーションの現在のUI/UXを分析し、ユーザー体験を向上させるための改善案を提案します。

---

## 1. グローバルな改善

### 1.1 デザインシステムの統一

**現状の課題:**
- 各画面で色、スペーシング、タイポグラフィが一貫していない
- ハードコードされた色コード（`#f5f5f5`, `#6200ee`, `#666`など）が散在
- React Native Paperを使用しているが、カスタムテーマが未定義

**改善案:**
- **テーマファイルの作成**: `theme.ts`を作成し、カラーパレット、タイポグラフィ、スペーシングを定義
- **カラーパレット**: 
  - Primary: ブランドカラー（現在の`#6200ee`を基準に調整）
  - Secondary: アクセントカラー
  - Background: 背景色のバリエーション
  - Surface: カード、モーダルなどの表面色
  - Error/Success/Warning: フィードバック用の色
- **ダークモード対応**: システム設定に応じたダークモード切り替え機能

### 1.2 多言語対応の基盤

**現状の課題:**
- 日本語と英語が混在している（例: schedule画面の"Meals for {date}"とボタンの"Add Meal"）
- ハードコードされたテキストが多数

**改善案:**
- **i18nライブラリの導入**: `react-i18next`または`expo-localization`を使用
- **言語ファイルの作成**: `locales/ja.json`, `locales/en.json`
- **統一言語の選択**: 当面は日本語に統一し、将来的に多言語対応を容易にする構造を準備

### 1.3 ナビゲーションの改善

**現状の課題:**
- タブバーに表示される項目が限定的（ホーム、スケジュール、買い物リスト）
- レシピ一覧へのアクセスがホーム→グループ選択→レシピという2段階

**改善案:**
- **タブバーの再設計**:
  - ホーム（グループ一覧）
  - レシピ（選択中のグループのレシピ）
  - スケジュール
  - 買い物リスト
  - その他（プロフィール、設定など）
- **グループ切り替え**: ヘッダーにグループ選択ドロップダウンを追加し、どの画面からでもグループを切り替え可能に

---

## 2. 画面別の改善案

### 2.1 ホーム画面（グループ一覧）

**ファイル**: `app/(app)/index.tsx`

#### 改善点

**A. ビジュアルの強化**
- **グループカードのデザイン改善**:
  - グループアイコン/カラーの追加（グループ作成時に選択可能）
  - メンバー数の表示
  - 最近の活動（最終更新日時、最近追加されたレシピなど）
- **空状態の改善**:
  - 現在: "グループがありません"のテキストのみ
  - 改善: イラスト + 説明文 + "グループを作成"または"グループに参加"のCTAボタン

**B. 機能の追加**
- **グループのソート/フィルタ**:
  - 最近使用した順
  - 名前順
  - 作成日順
- **グループの検索**: グループ数が増えた場合に備えて検索バーを追加
- **グループのプレビュー**: 長押しでグループの詳細情報（メンバー、レシピ数、スケジュール数）をモーダル表示

**C. UXの改善**
- **ヘッダーの整理**:
  - 現在: "グループ参加"と"サインアウト"ボタンが横並び
  - 改善: "サインアウト"はプロフィール画面に移動、ヘッダーには"グループ参加"ボタンとプロフィールアイコンのみ
- **FABの位置調整**: 画面下部のタブバーと重ならないように配置

### 2.2 レシピ一覧画面

**ファイル**: `app/(app)/recipes/index.tsx`

#### 改善点

**A. ビジュアルの強化**
- **カードレイアウトの改善**:
  - 現在: 画像 + タイトルのみ
  - 改善: 
    - タグの表示（最大3つまで）
    - 材料数の表示（例: "材料 12品"）
    - 調理時間の表示（データベースに追加が必要）
    - お気に入りアイコン
- **グリッドレイアウトオプション**: リスト表示とグリッド表示の切り替え機能

**B. 機能の追加**
- **高度な検索/フィルタ**:
  - 現在: 名前検索のみ
  - 改善:
    - タグでフィルタリング
    - 材料でフィルタリング（冷蔵庫にあるもので作れるレシピを探す）
    - お気に入りのみ表示
- **ソート機能**:
  - 最近追加された順
  - 名前順
  - 人気順（スケジュールに登録された回数）

**C. UXの改善**
- **検索バーの改善**:
  - 現在: 検索後にボタンを押す必要がある
  - 改善: リアルタイム検索（入力中に結果を更新）
- **空状態の改善**: イラスト + "最初のレシピを登録しましょう"のメッセージ

### 2.3 レシピ詳細画面

**ファイル**: `app/(app)/recipes/[id].tsx`

#### 改善点

**A. ビジュアルの強化**
- **画像ギャラリー**: 複数の画像を登録できるようにし、スワイプで閲覧
- **調理手順の改善**:
  - 現在: 1つのテキストフィールド
  - 改善: ステップごとに分割表示（1. 〜、2. 〜）
  - 各ステップに画像を追加可能
- **栄養情報の追加**: カロリー、タンパク質、炭水化物などの表示エリア（オプション）

**B. 機能の追加**
- **お気に入り機能**: ハートアイコンでお気に入りに追加/削除
- **共有機能**: レシピを他のユーザーやグループと共有
- **メモ機能**: 個人的なメモを追加（例: "砂糖を少なめにすると良い"）
- **スケジュールへの直接追加**: 詳細画面から直接スケジュールに追加できるボタン

**C. UXの改善**
- **アクションボタンの配置**:
  - 現在: 編集と削除ボタンが下部に配置
  - 改善: 
    - 編集と削除はヘッダーの右上にメニューアイコンとして配置
    - 下部には"スケジュールに追加"などのポジティブなアクションを配置
- **材料リストのチェック機能**: 買い物時に材料をチェックできる機能

### 2.4 レシピ作成/編集画面

**ファイル**: `app/(app)/recipes/create.tsx`, `app/(app)/recipes/edit/[id].tsx`

#### 改善点

**A. ビジュアルの強化**
- **プログレスインジケーター**: 複数ステップに分割し、現在の進捗を表示
  - ステップ1: 基本情報（名前、画像）
  - ステップ2: 材料
  - ステップ3: 調理手順
  - ステップ4: タグと追加情報
- **画像アップロード**: URLだけでなく、カメラやギャラリーから直接アップロード

**B. 機能の追加**
- **材料のオートコンプリート**: 過去に使用した材料を候補として表示
- **タグの選択UI**: カンマ区切りではなく、チップ形式で選択/追加
- **調理時間の入力**: 準備時間と調理時間を分けて入力
- **人数設定**: 何人分のレシピかを設定

**C. UXの改善**
- **ドラフト保存**: 自動保存機能で入力途中のデータを保持
- **バリデーションの改善**: リアルタイムでエラーを表示
- **材料の並び替え**: ドラッグ&ドロップで材料の順序を変更

### 2.5 スケジュール画面

**ファイル**: `app/(app)/schedule/index.tsx`

#### 改善点

**A. ビジュアルの強化**
- **カレンダーのカスタマイズ**:
  - 食事の種類ごとに異なる色のドットを表示
  - 週表示/月表示の切り替え
  - 今日の日付を強調表示
- **食事カードのデザイン改善**:
  - レシピの画像をサムネイル表示
  - タップで詳細画面へ遷移
  - スワイプで削除/編集

**B. 機能の追加**
- **週間ビュー**: 1週間分の献立を一覧表示
- **コピー機能**: 前週のスケジュールを今週にコピー
- **テンプレート機能**: よく使う1週間のパターンを保存
- **通知機能**: 食事の時間前に通知を送る

**C. UXの改善**
- **モーダルの改善**:
  - 現在: 食事タイプを選択してからレシピ選択画面へ遷移
  - 改善: モーダル内でレシピを直接検索・選択できるように
- **日付選択の改善**: 日付が選択されていない場合は今日の日付を自動選択
- **空状態の改善**: "日付を選択してください"ではなく、今日の献立を自動表示

### 2.6 買い物リスト画面

**ファイル**: `app/(app)/shopping-list/index.tsx`

#### 改善点

**A. ビジュアルの強化**
- **カテゴリー分け**: 材料をカテゴリー（野菜、肉、調味料など）で分類表示
- **購入済みアイテムの表示**: 
  - 現在: 打ち消し線のみ
  - 改善: 購入済みアイテムを下部に移動、または非表示にするオプション
- **プログレスバー**: 全体の購入進捗を表示（例: "12/20アイテム購入済み"）

**B. 機能の追加**
- **期間指定の改善**:
  - 現在: 今日以降のスケジュールから自動生成
  - 改善: 日付範囲を指定して生成（例: 今週、来週、今月）
- **数量の調整**: 同じ材料が複数のレシピに含まれる場合、合計数量を表示
- **店舗別リスト**: よく行くスーパーの売り場順に並び替え（カスタマイズ可能）
- **共有機能**: 買い物リストを家族とリアルタイム共有

**C. UXの改善**
- **スワイプアクション**: 
  - 右スワイプ: チェック/チェック解除
  - 左スワイプ: 削除
- **音声入力**: 音声でアイテムを追加
- **一括操作**: 全てチェック、購入済みを削除などの一括操作ボタン

### 2.7 プロフィール画面

**ファイル**: `app/(app)/profile.tsx`

#### 改善点

**A. ビジュアルの強化**
- **アバター画像のアップロード**: カメラやギャラリーから画像を選択
- **統計情報の表示**:
  - 登録したレシピ数
  - 参加しているグループ数
  - 今月のスケジュール登録数

**B. 機能の追加**
- **設定セクション**:
  - 通知設定
  - 言語設定
  - テーマ設定（ライト/ダーク）
  - データのエクスポート
- **アカウント管理**:
  - パスワード変更
  - メールアドレス変更
  - アカウント削除
- **ヘルプ・サポート**:
  - FAQ
  - お問い合わせ
  - 利用規約・プライバシーポリシー

**C. UXの改善**
- **サインアウトボタンの配置**: 設定セクションの最下部に移動
- **セクション分け**: 情報を論理的なセクションに分割（プロフィール、設定、アカウント、ヘルプ）

### 2.8 グループ管理画面

**ファイル**: `app/(app)/groups/create.tsx`, `app/(app)/groups/join.tsx`

#### 改善点

**A. グループ作成画面**
- **グループアイコン/カラー選択**: グループを視覚的に区別しやすくする
- **グループ説明**: グループの目的や説明を追加
- **公開/非公開設定**: 招待制か、誰でも参加可能かを選択

**B. グループ参加画面**
- **招待コード/リンク**: QRコードまたは招待リンクで簡単に参加
- **グループ検索**: 公開グループを検索して参加

**C. グループ詳細画面（新規作成が必要）**
- **メンバー一覧**: グループメンバーの表示と管理
- **権限管理**: 管理者、メンバーなどの役割設定
- **グループ設定**: グループ名、アイコン、説明の編集
- **グループから退出**: グループを退出するオプション

---

## 3. 新機能の提案

### 3.1 献立提案機能（スペックのP3機能）

**概要**: AIを使用せずに、既存のデータから献立を提案

**実装案**:
- **ランダム提案**: グループ内のレシピからランダムに1週間分の献立を生成
- **バランス提案**: タグ（主食、主菜、副菜など）を考慮してバランスの良い献立を提案
- **過去の人気**: スケジュールに登録された回数が多いレシピを優先的に提案

### 3.2 レシピのインポート/エクスポート

**概要**: レシピをJSON形式でインポート/エクスポート

**用途**:
- 他のアプリからのデータ移行
- バックアップ
- グループ間でのレシピ共有

### 3.3 調理モード

**概要**: レシピを調理しながら見やすく表示するモード

**特徴**:
- 大きなフォント
- ステップごとの表示
- 音声読み上げ
- タイマー機能
- 画面の自動スリープ防止

### 3.4 食材在庫管理

**概要**: 冷蔵庫にある食材を管理し、それを使ったレシピを提案

**機能**:
- 食材の追加/削除
- 賞味期限の管理
- 在庫がある食材で作れるレシピの検索

---

## 4. パフォーマンスとアクセシビリティ

### 4.1 パフォーマンス最適化

- **画像の最適化**: 
  - 画像の遅延読み込み
  - サムネイル生成
  - WebP形式の使用
- **リストの仮想化**: 長いリストでのパフォーマンス改善（FlatListの最適化）
- **キャッシング**: Supabaseクエリの結果をキャッシュ

### 4.2 アクセシビリティ

- **スクリーンリーダー対応**: 全ての要素に適切なラベルを追加
- **コントラスト比**: WCAG基準を満たす色のコントラスト
- **フォントサイズ**: システムのフォントサイズ設定に対応
- **タッチターゲット**: 最小44x44pxのタッチ領域を確保

---

## 5. 実装の優先順位

### Phase 1: 基盤整備（高優先度）
1. デザインシステムの統一（テーマファイル作成）
2. 多言語対応の基盤（日本語に統一）
3. ナビゲーションの改善（タブバー再設計）

### Phase 2: コア機能の改善（中優先度）
1. レシピ一覧・詳細画面の改善
2. スケジュール画面の改善
3. 買い物リスト画面の改善

### Phase 3: 新機能追加（低優先度）
1. グループ詳細画面の作成
2. 献立提案機能
3. 調理モード

### Phase 4: 高度な機能（将来的）
1. 食材在庫管理
2. レシピのインポート/エクスポート
3. AI献立提案（スペックのP3）

---

## 6. まとめ

このドキュメントでは、meals3アプリケーションのUI/UX改善案を包括的に提案しました。改善の主な方向性は以下の通りです:

1. **一貫性**: デザインシステムを統一し、アプリ全体で一貫したルック&フィールを実現
2. **使いやすさ**: ナビゲーションを改善し、ユーザーが目的の機能に素早くアクセスできるように
3. **視覚的魅力**: 空状態の改善、カードデザインの強化など、視覚的に魅力的なUIを実現
4. **機能性**: 検索、フィルタ、ソートなど、ユーザーが求める機能を追加
5. **パフォーマンス**: 最適化により、快適な操作体験を提供

実装は段階的に行い、ユーザーフィードバックを収集しながら継続的に改善していくことを推奨します。
